(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{95103:(e,r,t)=>{Promise.resolve().then(t.bind(t,38152))},38152:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(39233),s=t(65843),n=t(95155),o=t(12115),i=t(76046),d=t(14085),l=t(35007),c=t(9955),u=t(15785),f=t(36972),m=t(39677),v=t(30814),g=t(8690),p=t(39286);function x(){let e=(0,i.useRouter)(),[r,t]=(0,o.useState)({name:"",section:"BSCE - ",event:""}),[x,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{h(!0)},[]),(0,o.useEffect)(()=>{x&&(async()=>{try{if(await (0,g.Xv)(),(await (0,g.i7)("trackerInfo")).find(e=>"trackerInfo"===e.id)){v.o.success("You are currently logged in. Redirecting to dashboard..."),e.push("/tracker");return}}catch(e){console.error("Error checking tracker info:",e),v.o.error("Failed to get previous session data.")}})()},[x,e]);let b=async t=>{t.preventDefault();try{r.name&&r.section.length>7&&r.event?(await (0,g.Xv)(),await (0,g.B5)("trackerInfo",{id:"trackerInfo",trackerName:r.name,trackerSection:r.section,eventName:r.event}),v.o.success("Welcome! You can now start scanning attendance."),e.push("/tracker")):v.o.error("Please fill in all fields correctly.")}catch(e){console.error("Error storing tracker data:",e),v.o.error("Something went wrong. Please try again.")}};return x?(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,n.jsx)(l.Zp,{className:"w-full max-w-md",children:(0,n.jsxs)(l.Wu,{className:"pt-6",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"PICE BulSU-SC"}),(0,n.jsx)("h2",{className:"text-lg text-muted-foreground",children:"Attendance Monitoring System"}),(0,n.jsx)(p.E,{variant:"outline",className:"text-yellow-500 border-yellow-500 mt-1 inline-block",children:"v0.1.0-beta"})]}),(0,n.jsxs)(m.Fc,{className:"mb-6",children:[(0,n.jsx)(f.A,{className:"h-4 w-4"}),(0,n.jsx)(m.XL,{children:"Important Note"}),(0,n.jsx)(m.TN,{children:"All session data is stored locally in your device. Please avoid clearing your browser cache while using the system to prevent data loss."})]}),(0,n.jsxs)("form",{className:"space-y-4",onSubmit:b,children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.J,{htmlFor:"name",children:"Name of Tracker"}),(0,n.jsx)(c.p,{id:"name",placeholder:"Enter your name",value:r.name,onChange:e=>t((0,s._)((0,a._)({},r),{name:e.target.value})),required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.J,{htmlFor:"section",children:"Section"}),(0,n.jsx)(c.p,{id:"section",value:r.section,onChange:e=>{let n=e.target.value;n.startsWith("BSCE - ")?t((0,s._)((0,a._)({},r),{section:n})):t((0,s._)((0,a._)({},r),{section:"BSCE - "}))},onFocus:e=>{let r=e.target.value.length;e.target.setSelectionRange(r,r)},required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.J,{htmlFor:"event",children:"Event Name"}),(0,n.jsx)(c.p,{id:"event",placeholder:"Enter event name",value:r.event,onChange:e=>t((0,s._)((0,a._)({},r),{event:e.target.value})),required:!0})]}),(0,n.jsx)(d.$,{type:"submit",className:"w-full",children:"Start Tracking"})]})]})})}):null}},39677:(e,r,t)=>{"use strict";t.d(r,{Fc:()=>c,TN:()=>f,XL:()=>u});var a=t(39233),s=t(94556),n=t(95155),o=t(12115),i=t(31027),d=t(29602);let l=(0,i.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=o.forwardRef((e,r)=>{var{className:t,variant:o}=e,i=(0,s._)(e,["className","variant"]);return(0,n.jsx)("div",(0,a._)({ref:r,role:"alert",className:(0,d.cn)(l({variant:o}),t)},i))});c.displayName="Alert";let u=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("h5",(0,a._)({ref:r,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",t)},o))});u.displayName="AlertTitle";let f=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",t)},o))});f.displayName="AlertDescription"},39286:(e,r,t)=>{"use strict";t.d(r,{E:()=>l});var a=t(39233),s=t(94556),n=t(95155);t(12115);var o=t(31027),i=t(29602);let d=(0,o.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){var{className:r,variant:t}=e,o=(0,s._)(e,["className","variant"]);return(0,n.jsx)("div",(0,a._)({className:(0,i.cn)(d({variant:t}),r)},o))}},14085:(e,r,t)=>{"use strict";t.d(r,{$:()=>u,r:()=>c});var a=t(39233),s=t(94556),n=t(95155),o=t(12115),i=t(12317),d=t(31027),l=t(29602);let c=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,r)=>{var{className:t,variant:o,size:d,asChild:u=!1}=e,f=(0,s._)(e,["className","variant","size","asChild"]);let m=u?i.DX:"button";return(0,n.jsx)(m,(0,a._)({className:(0,l.cn)(c({variant:o,size:d,className:t})),ref:r},f))});u.displayName="Button"},35007:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>u,ZB:()=>c,Zp:()=>d,aR:()=>l});var a=t(39233),s=t(94556),n=t(95155),o=t(12115),i=t(29602);let d=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t)},o))});d.displayName="Card";let l=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t)},o))});l.displayName="CardHeader";let c=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",t)},o))});c.displayName="CardTitle",o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t)},o))}).displayName="CardDescription";let u=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,i.cn)("p-6 pt-0",t)},o))});u.displayName="CardContent",o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t)},o))}).displayName="CardFooter"},9955:(e,r,t)=>{"use strict";t.d(r,{p:()=>d});var a=t(39233),s=t(94556),n=t(95155),o=t(12115),i=t(29602);let d=o.forwardRef((e,r)=>{var{className:t,type:o}=e,d=(0,s._)(e,["className","type"]);return(0,n.jsx)("input",(0,a._)({type:o,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r},d))});d.displayName="Input"},15785:(e,r,t)=>{"use strict";t.d(r,{J:()=>u});var a=t(39233),s=t(94556),n=t(95155),o=t(12115),i=t(46195),d=t(31027),l=t(29602);let c=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef((e,r)=>{var{className:t}=e,o=(0,s._)(e,["className"]);return(0,n.jsx)(i.b,(0,a._)({ref:r,className:(0,l.cn)(c(),t)},o))});u.displayName=i.b.displayName},29602:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(43463),s=t(69795);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},36972:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(82800).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},76046:(e,r,t)=>{"use strict";var a=t(66658);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},8690:(e,r,t)=>{"use strict";t.d(r,{B5:()=>o,Hg:()=>d,Xv:()=>n,i7:()=>i});let a="attendance_tracker_db",s=null;async function n(){return new Promise((e,r)=>{if(s){e();return}let t=indexedDB.open(a,1);t.onerror=e=>{console.error("IndexedDB error:",e),r("Failed to open IndexedDB")},t.onupgradeneeded=e=>{let r=e.target.result;r.objectStoreNames.contains("trackerInfo")||r.createObjectStore("trackerInfo",{keyPath:"id"}),r.objectStoreNames.contains("scans")||r.createObjectStore("scans",{keyPath:"id"}),r.objectStoreNames.contains("attendance")||r.createObjectStore("attendance",{keyPath:"id"})},t.onsuccess=r=>{s=r.target.result,console.log("IndexedDB initialized successfully"),e()}})}async function o(e,r){return new Promise((t,a)=>{if(!s){a("Database not initialized");return}let n=s.transaction(e,"readwrite").objectStore(e);r.id||(r.id=Date.now().toString());let o=n.put(r);o.onsuccess=()=>{console.log("Data successfully added to IndexedDB:",r),window.postMessage({type:"indexedDB_change"},window.location.origin),t()},o.onerror=r=>{console.error("Error adding item to ".concat(e,":"),r),a("Failed to add item to ".concat(e))}})}async function i(e){return new Promise((r,t)=>{if(!s){t("Database not initialized");return}let a=s.transaction(e,"readonly").objectStore(e).getAll();a.onsuccess=e=>{r(e.target.result)},a.onerror=r=>{console.error("Error getting items from ".concat(e,":"),r),t("Failed to get items from ".concat(e))}})}async function d(){return new Promise((e,r)=>{if(!s){r("Database not initialized");return}s.close();let t=indexedDB.deleteDatabase(a);t.onsuccess=()=>{s=null,e()},t.onerror=e=>{console.error("Error deleting database:",e),r("Failed to delete database")}})}},46195:(e,r,t)=>{"use strict";t.d(r,{b:()=>l});var a=t(39233),s=t(65843),n=t(12115),o=t(23360),i=t(95155),d=n.forwardRef((e,r)=>(0,i.jsx)(o.sG.label,(0,s._)((0,a._)({},e),{ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}})));d.displayName="Label";var l=d},23360:(e,r,t)=>{"use strict";t.d(r,{hO:()=>d,sG:()=>i});var a=t(12115),s=t(47650),n=t(12317),o=t(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let t=a.forwardRef((e,t)=>{let{asChild:a,...s}=e,i=a?n.DX:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(i,{...s,ref:t})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{});function d(e,r){e&&s.flushSync(()=>e.dispatchEvent(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[524,814,441,517,358],()=>r(95103)),_N_E=e.O()}]);