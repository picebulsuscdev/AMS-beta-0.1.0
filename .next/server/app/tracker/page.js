(()=>{var e={};e.id=177,e.ids=[177],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},56278:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=r(70260),n=r(28203),i=r(25155),s=r.n(i),o=r(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["tracker",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,38771)),"/home/runner/PICE-AMS2-V4/pice-ams/app/tracker/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/home/runner/PICE-AMS2-V4/pice-ams/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/home/runner/PICE-AMS2-V4/pice-ams/app/tracker/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/tracker/page",pathname:"/tracker",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},80552:(e,t,r)=>{Promise.resolve().then(r.bind(r,38771))},44104:(e,t,r)=>{Promise.resolve().then(r.bind(r,39366))},77925:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},14373:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},72785:(e,t,r)=>{Promise.resolve().then(r.bind(r,56814))},63057:(e,t,r)=>{Promise.resolve().then(r.bind(r,91542))},39366:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eI});var a=r(45512),n=r(58009),i=r(79334);class s{constructor(e,t,r,a,n){this._legacyCanvasSize=s.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),r&&"object"==typeof r?this._onDecode=t:(r||a||n?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t="object"==typeof r?r:{},this._onDecodeError=t.onDecodeError||("function"==typeof r?r:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"==typeof a?a:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||n||this._preferredCamera,this._legacyCanvasSize="number"==typeof r?r:"number"==typeof a?a:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let i=!1;if(e.hidden&&(e.hidden=!1,i=!0),document.body.contains(e)||(document.body.appendChild(e),i=!0),r=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(a=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),(n=this.$overlay.style).position="absolute",n.display="none",n.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!a&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(e){}r.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),i=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),i=!0),i&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=s.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await s.listCameras(!1)).length}catch(e){return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),r;try{e&&(await t()).every(e=>!e.label)&&(r=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(e){}try{return(await t()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":`Camera ${t+1}`)}))}finally{r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),s._stopVideoStream(r))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),s._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),s._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden)){if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?s._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(s._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(t(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,r,a,n=!1,i=!1){let o,l=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(o=t.scanRegion,r=t.qrEngine,a=t.canvas,n=t.disallowCanvasResizing||!1,i=t.alsoTryWithoutScanRegion||!1,l=!0):t||r||a||n||i?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!r;try{let c,d,u;if([r,c]=await Promise.all([r||s.createQrEngine(),s._loadImage(e)]),[a,d]=s._drawToCanvas(c,o,a,n),r instanceof Worker){let e=r;t||s._postWorkerMessageSync(e,"inversionMode","both"),u=await new Promise((t,r)=>{let n,i,l,c=-1;i=a=>{a.data.id===c&&(e.removeEventListener("message",i),e.removeEventListener("error",l),clearTimeout(n),null!==a.data.data?t({data:a.data.data,cornerPoints:s._convertPoints(a.data.cornerPoints,o)}):r(s.NO_QR_CODE_FOUND))},l=t=>{e.removeEventListener("message",i),e.removeEventListener("error",l),clearTimeout(n),r("Scanner error: "+(t?t.message||t:"Unknown Error"))},e.addEventListener("message",i),e.addEventListener("error",l),n=setTimeout(()=>l("timeout"),1e4);let u=d.getImageData(0,0,a.width,a.height);c=s._postWorkerMessageSync(e,"decode",u,[u.data.buffer])})}else u=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await r.detect(a);if(!t)throw s.NO_QR_CODE_FOUND;return{data:t.rawValue,cornerPoints:s._convertPoints(t.cornerPoints,o)}}catch(r){if(t=r.message||r,/not implemented|service unavailable/.test(t))return s._disableBarcodeDetector=!0,s.scanImage(e,{scanRegion:o,canvas:a,disallowCanvasResizing:n,alsoTryWithoutScanRegion:i});throw`Scanner error: ${t}`}})()]);return l?u:u.data}catch(c){if(!o||!i)throw c;let t=await s.scanImage(e,{qrEngine:r,canvas:a,disallowCanvasResizing:n});return l?t:t.data}finally{t||s._postWorkerMessage(r,"close")}}setGrayscaleWeights(e,t,r,a=!0){s._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:r,useIntegerApproximation:a})}setInversionMode(e){s._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>r.e(466).then(r.bind(r,82466)).then(e=>e.createWorker()),!(!s._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:e})=>/Chromium/i.test(e))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:e,platformVersion:t})=>/arm/i.test(e||"arm")&&13<=parseInt(t||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,r=e.videoHeight,a=e.offsetWidth,n=e.offsetHeight,i=e.offsetLeft,s=e.offsetTop,o=window.getComputedStyle(e),l=o.objectFit,c=t/r,d=a/n;switch(l){case"none":var u=t,h=r;break;case"fill":u=a,h=n;break;default:("cover"===l?c>d:c<d)?u=(h=n)*c:h=(u=a)/c,"scale-down"===l&&(u=Math.min(u,t),h=Math.min(h,r))}var[m,f]=o.objectPosition.split(" ").map((e,t)=>{let r=parseFloat(e);return e.endsWith("%")?(t?n-h:a-u)*r/100:r});o=this._scanRegion.width||t,d=this._scanRegion.height||r,l=this._scanRegion.x||0;var p=this._scanRegion.y||0;(c=this.$overlay.style).width=`${o/t*u}px`,c.height=`${d/r*h}px`,c.top=`${s+f+p/r*h}px`,r=/scaleX\(-1\)/.test(e.style.transform),c.left=`${i+(r?a-m-u:m)+(r?t-l-o:l)/t*u}px`,c.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let r=t.x||0,a=t.y||0,n=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;for(let i of(t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1,e))i.x=i.x*n+r,i.y=i.y*t+a;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(r=>setTimeout(r,t-e)),this._lastScanTimestamp=Date.now();try{var r=await s.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(e){if(!this._active)return;this._onDecodeError(e)}!s._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=s.createQrEngine()),r?(this._onDecode?this._onDecode(r):this._legacyOnDecode&&this._legacyOnDecode(r.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",r.cornerPoints.map(({x:e,y:t})=>`${e},${t}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==s.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}];for(let r of[...t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}})),...t])try{let e=await navigator.mediaDevices.getUserMedia({video:r,audio:!1}),t=this._getFacingMode(e)||(r.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:e,facingMode:t}}catch(e){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,r,a=!1){r=r||document.createElement("canvas");let n=t&&t.x?t.x:0,i=t&&t.y?t.y:0,s=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return a||(a=t&&t.downScaledWidth?t.downScaledWidth:s,t=t&&t.downScaledHeight?t.downScaledHeight:o,r.width!==a&&(r.width=a),r.height!==t&&(r.height=t)),(t=r.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,n,i,s,o,0,0,r.width,r.height),[r,t]}static async _loadImage(e){if(e instanceof Image)return await s._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await s._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,r)=>{let a=n=>{e.removeEventListener("load",a),e.removeEventListener("error",a),n instanceof ErrorEvent?r("Image load error"):t()};e.addEventListener("load",a),e.addEventListener("error",a)})}static async _postWorkerMessage(e,t,r,a){return s._postWorkerMessageSync(await e,t,r,a)}static _postWorkerMessageSync(e,t,r,a){if(!(e instanceof Worker))return -1;let n=s._workerMessageId++;return e.postMessage({id:n,type:t,data:r},a),n}}s.DEFAULT_CANVAS_SIZE=400,s.NO_QR_CODE_FOUND="No QR code found",s._disableBarcodeDetector=!1,s._workerMessageId=0;var o=r(87021),l=r(97643),c=r(31412),d=r(29952),u=r(6004),h=r(13024),m=r(66582),f=r(38762),p=r(30830),g="Switch",[v,y]=(0,u.A)(g),[w,x]=v(g),b=n.forwardRef((e,t)=>{let{__scopeSwitch:r,name:i,checked:s,defaultChecked:o,required:l,disabled:u,value:m="on",onCheckedChange:f,form:g,...v}=e,[y,x]=n.useState(null),b=(0,d.s)(t,e=>x(e)),j=n.useRef(!1),S=!y||g||!!y.closest("form"),[E=!1,C]=(0,h.i)({prop:s,defaultProp:o,onChange:f});return(0,a.jsxs)(w,{scope:r,checked:E,disabled:u,children:[(0,a.jsx)(p.sG.button,{type:"button",role:"switch","aria-checked":E,"aria-required":l,"data-state":N(E),"data-disabled":u?"":void 0,disabled:u,value:m,...v,ref:b,onClick:(0,c.m)(e.onClick,e=>{C(e=>!e),S&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),S&&(0,a.jsx)(_,{control:y,bubbles:!j.current,name:i,value:m,checked:E,required:l,disabled:u,form:g,style:{transform:"translateX(-100%)"}})]})});b.displayName=g;var j="SwitchThumb",S=n.forwardRef((e,t)=>{let{__scopeSwitch:r,...n}=e,i=x(j,r);return(0,a.jsx)(p.sG.span,{"data-state":N(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});S.displayName=j;var _=e=>{let{control:t,checked:r,bubbles:i=!0,...s}=e,o=n.useRef(null),l=(0,m.Z)(r),c=(0,f.X)(t);return n.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==r&&t){let a=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(a)}},[l,r,i]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return e?"checked":"unchecked"}var E=r(59462);let C=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(b,{className:(0,E.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,a.jsx)(S,{className:(0,E.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));C.displayName=b.displayName;var R=r(53261),k=r(91542),P=r(44949),D=r(63170),O=r(73258);let $=(0,O.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),T=(0,O.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var L=r(77252),A=r(43050);let I=(0,n.forwardRef)(({eventId:e,onScanSuccess:t},r)=>{let[i,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(!0),[f,p]=(0,n.useState)(!1),g=(0,n.useRef)(null),[v,y]=(0,n.useState)(null),w=(0,n.useCallback)(()=>{new Audio("/error.mp3").play().catch(console.error)},[]);(0,n.useEffect)(()=>{(async()=>{try{await (0,A.Xv)();let e=await (0,A.i7)("trackerInfo"),t=e.find(e=>"timeStatus"===e.id)?.timeStatus;m("in"===t||void 0===t)}catch(e){console.error("Error loading time status from IndexedDB:",e),k.o.error("Error loading previous Time Status.")}finally{p(!0)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=await s.hasCamera();u(e)}catch(e){console.error("Error checking for camera:",e),u(!1)}})()},[]),(0,n.useEffect)(()=>()=>{v&&v.destroy()},[v]);let x=(0,n.useCallback)(async()=>{try{if(!g.current)return;let e=new s(g.current,e=>{"object"==typeof e&&e.data?(console.log("QR Code detected:",e.data),t({code:e.data,type:h?"in":"out"})):(w(),k.o.error("Error processing QR code"))},{highlightScanRegion:!0,highlightCodeOutline:!0,maxScansPerSecond:1});y(e),c(!0)}catch(e){k.o.error("Failed to start scanner. Please check camera permissions."),console.error("Failed to start scanner:",e)}},[g,t,w,h]),b=(0,n.useCallback)(()=>{v&&(v.stop(),c(!1))},[v]);return((0,n.useEffect)(()=>{v&&i&&d?v.start().catch(e=>{console.error("Failed to start scanner:",e),k.o.error("Failed to start scanner. Please check camera permissions."),c(!1)}):v?.stop()},[v,i,d]),(0,n.useEffect)(()=>{let e=()=>{document.hidden?b():i&&x()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[i,x,b]),(0,n.useEffect)(()=>{let e=async()=>{try{await (0,A.Xv)(),await (0,A.B5)("trackerInfo",{id:"timeStatus",timeStatus:h?"in":"out"})}catch(e){console.error("Error saving time status to IndexedDB:",e),k.o.error("Error saving Time Status.")}};f&&e()},[h,f]),(0,n.useImperativeHandle)(r,()=>({startScanning:x,stopScanning:b})),f)?null===d?(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"flex items-center justify-center p-6",children:(0,a.jsx)(P.A,{className:"h-8 w-8 animate-spin text-primary"})})}):!1===d?(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please ensure you have a working camera and have granted camera permissions to use the QR scanner."})})}):(0,a.jsxs)(l.Zp,{className:"overflow-hidden",children:[(0,a.jsx)(l.aR,{className:"space-y-1",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-5 w-5"}),"QR Code Scanner"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(C,{id:"time-toggle",checked:h,onCheckedChange:()=>{if(i){k.o.info("Please stop scanning to change Time Status.");return}m(!h)},disabled:i}),(0,a.jsx)(R.J,{htmlFor:"time-toggle",className:"text-sm",children:h?"Time In":"Time Out"})]})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative aspect-square max-w-sm mx-auto overflow-hidden rounded-lg border-2",children:[(0,a.jsxs)("div",{className:`absolute top-0 left-0 flex flex-col items-center justify-center w-full h-full border-2 border-dashed transition-opacity ${i?"opacity-0 pointer-events-none":"opacity-100"}`,children:[(0,a.jsx)(T,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center px-4",children:"Position the QR code within the frame to scan"})]}),(0,a.jsx)("video",{ref:g,className:`${i?"opacity-100":"opacity-0 pointer-events-none"} absolute top-0 left-0 w-full h-full object-cover transition-opacity`,playsInline:!0})]}),(0,a.jsx)("div",{className:"flex items-center gap-4 mt-4",children:(0,a.jsx)(o.$,{onClick:i?b:x,className:"w-full",variant:i?"secondary":"default",disabled:!f||null===d||!1===d,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop Scanning"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{className:"mr-2 h-4 w-4"}),"Start Scanning"]})})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.E,{variant:i?"default":"secondary",children:i?"Scanner Active":"Scanner Inactive"}),(0,a.jsx)(L.E,{variant:h?"default":"secondary",children:h?"Time In Mode":"Time Out Mode"})]})]})})]}):null});I.displayName="QRScanner";var M=r(92140),F=r(84653),B=r(80297),H=r(19473),W=r(25409),V=r(98060),z=r(92828),U=r(59018),q=r(49397),Q="ScrollArea",[X,G]=(0,u.A)(Q),[Y,Z]=X(Q),J=n.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:i="hover",dir:s,scrollHideDelay:o=600,...l}=e,[c,u]=n.useState(null),[h,m]=n.useState(null),[f,g]=n.useState(null),[v,y]=n.useState(null),[w,x]=n.useState(null),[b,j]=n.useState(0),[S,_]=n.useState(0),[N,E]=n.useState(!1),[C,R]=n.useState(!1),k=(0,d.s)(t,e=>u(e)),P=(0,U.jH)(s);return(0,a.jsx)(Y,{scope:r,type:i,dir:P,scrollHideDelay:o,scrollArea:c,viewport:h,onViewportChange:m,content:f,onContentChange:g,scrollbarX:v,onScrollbarXChange:y,scrollbarXEnabled:N,onScrollbarXEnabledChange:E,scrollbarY:w,onScrollbarYChange:x,scrollbarYEnabled:C,onScrollbarYEnabledChange:R,onCornerWidthChange:j,onCornerHeightChange:_,children:(0,a.jsx)(p.sG.div,{dir:P,...l,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});J.displayName=Q;var K="ScrollAreaViewport",ee=n.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:i,nonce:s,...o}=e,l=Z(K,r),c=n.useRef(null),u=(0,d.s)(t,c,l.onViewportChange);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),(0,a.jsx)(p.sG.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,a.jsx)("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});ee.displayName=K;var et="ScrollAreaScrollbar",er=n.forwardRef((e,t)=>{let{forceMount:r,...i}=e,s=Z(et,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,c="horizontal"===e.orientation;return n.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),"hover"===s.type?(0,a.jsx)(ea,{...i,ref:t,forceMount:r}):"scroll"===s.type?(0,a.jsx)(en,{...i,ref:t,forceMount:r}):"auto"===s.type?(0,a.jsx)(ei,{...i,ref:t,forceMount:r}):"always"===s.type?(0,a.jsx)(es,{...i,ref:t}):null});er.displayName=et;var ea=n.forwardRef((e,t)=>{let{forceMount:r,...i}=e,s=Z(et,e.__scopeScrollArea),[o,l]=n.useState(!1);return n.useEffect(()=>{let e=s.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),l(!0)},a=()=>{t=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",a)}}},[s.scrollArea,s.scrollHideDelay]),(0,a.jsx)(V.C,{present:r||o,children:(0,a.jsx)(ei,{"data-state":o?"visible":"hidden",...i,ref:t})})}),en=n.forwardRef((e,t)=>{var r,i;let{forceMount:s,...o}=e,l=Z(et,e.__scopeScrollArea),d="horizontal"===e.orientation,u=e_(()=>m("SCROLL_END"),100),[h,m]=(r="hidden",i={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},n.useReducer((e,t)=>i[e][t]??e,r));return n.useEffect(()=>{if("idle"===h){let e=window.setTimeout(()=>m("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[h,l.scrollHideDelay,m]),n.useEffect(()=>{let e=l.viewport,t=d?"scrollLeft":"scrollTop";if(e){let r=e[t],a=()=>{let a=e[t];r!==a&&(m("SCROLL"),u()),r=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[l.viewport,d,m,u]),(0,a.jsx)(V.C,{present:s||"hidden"!==h,children:(0,a.jsx)(es,{"data-state":"hidden"===h?"hidden":"visible",...o,ref:t,onPointerEnter:(0,c.m)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,c.m)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),ei=n.forwardRef((e,t)=>{let r=Z(et,e.__scopeScrollArea),{forceMount:i,...s}=e,[o,l]=n.useState(!1),c="horizontal"===e.orientation,d=e_(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?e:t)}},10);return eN(r.viewport,d),eN(r.content,d),(0,a.jsx)(V.C,{present:i||o,children:(0,a.jsx)(es,{"data-state":o?"visible":"hidden",...s,ref:t})})}),es=n.forwardRef((e,t)=>{let{orientation:r="vertical",...i}=e,s=Z(et,e.__scopeScrollArea),o=n.useRef(null),l=n.useRef(0),[c,d]=n.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ew(c.viewport,c.content),h={...i,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function m(e,t){return function(e,t,r,a="ltr"){let n=ex(r),i=t||n/2,s=r.scrollbar.paddingStart+i,o=r.scrollbar.size-r.scrollbar.paddingEnd-(n-i),l=r.content-r.viewport;return ej([s,o],"ltr"===a?[0,l]:[-1*l,0])(e)}(e,l.current,c,t)}return"horizontal"===r?(0,a.jsx)(eo,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){let e=eb(s.viewport.scrollLeft,c,s.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=m(e,s.dir))}}):"vertical"===r?(0,a.jsx)(el,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){let e=eb(s.viewport.scrollTop,c);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=m(e))}}):null}),eo=n.forwardRef((e,t)=>{let{sizes:r,onSizesChange:i,...s}=e,o=Z(et,e.__scopeScrollArea),[l,c]=n.useState(),u=n.useRef(null),h=(0,d.s)(t,u,o.onScrollbarXChange);return n.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),(0,a.jsx)(eu,{"data-orientation":"horizontal",...s,ref:h,sizes:r,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ex(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(o.viewport){let a=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),function(e,t){return e>0&&e<t}(a,r)&&t.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:ey(l.paddingLeft),paddingEnd:ey(l.paddingRight)}})}})}),el=n.forwardRef((e,t)=>{let{sizes:r,onSizesChange:i,...s}=e,o=Z(et,e.__scopeScrollArea),[l,c]=n.useState(),u=n.useRef(null),h=(0,d.s)(t,u,o.onScrollbarYChange);return n.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),(0,a.jsx)(eu,{"data-orientation":"vertical",...s,ref:h,sizes:r,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ex(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(o.viewport){let a=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),function(e,t){return e>0&&e<t}(a,r)&&t.preventDefault()}},onResize:()=>{u.current&&o.viewport&&l&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:ey(l.paddingTop),paddingEnd:ey(l.paddingBottom)}})}})}),[ec,ed]=X(et),eu=n.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:i,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:m,onWheelScroll:f,onResize:g,...v}=e,y=Z(et,r),[w,x]=n.useState(null),b=(0,d.s)(t,e=>x(e)),j=n.useRef(null),S=n.useRef(""),_=y.viewport,N=i.content-i.viewport,E=(0,z.c)(f),C=(0,z.c)(h),R=e_(g,10);function k(e){j.current&&m({x:e.clientX-j.current.left,y:e.clientY-j.current.top})}return n.useEffect(()=>{let e=e=>{let t=e.target;w?.contains(t)&&E(e,N)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[_,w,N,E]),n.useEffect(C,[i,C]),eN(w,R),eN(y.content,R),(0,a.jsx)(ec,{scope:r,scrollbar:w,hasThumb:s,onThumbChange:(0,z.c)(o),onThumbPointerUp:(0,z.c)(l),onThumbPositionChange:C,onThumbPointerDown:(0,z.c)(u),children:(0,a.jsx)(p.sG.div,{...v,ref:b,style:{position:"absolute",...v.style},onPointerDown:(0,c.m)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),j.current=w.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),k(e))}),onPointerMove:(0,c.m)(e.onPointerMove,k),onPointerUp:(0,c.m)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,y.viewport&&(y.viewport.style.scrollBehavior=""),j.current=null})})})}),eh="ScrollAreaThumb",em=n.forwardRef((e,t)=>{let{forceMount:r,...n}=e,i=ed(eh,e.__scopeScrollArea);return(0,a.jsx)(V.C,{present:r||i.hasThumb,children:(0,a.jsx)(ef,{ref:t,...n})})}),ef=n.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:i,...s}=e,o=Z(eh,r),l=ed(eh,r),{onThumbPositionChange:u}=l,h=(0,d.s)(t,e=>l.onThumbChange(e)),m=n.useRef(void 0),f=e_(()=>{m.current&&(m.current(),m.current=void 0)},100);return n.useEffect(()=>{let e=o.viewport;if(e){let t=()=>{if(f(),!m.current){let t=eS(e,u);m.current=t,u()}};return u(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,f,u]),(0,a.jsx)(p.sG.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:(0,c.m)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;l.onThumbPointerDown({x:r,y:a})}),onPointerUp:(0,c.m)(e.onPointerUp,l.onThumbPointerUp)})});em.displayName=eh;var ep="ScrollAreaCorner",eg=n.forwardRef((e,t)=>{let r=Z(ep,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?(0,a.jsx)(ev,{...e,ref:t}):null});eg.displayName=ep;var ev=n.forwardRef((e,t)=>{let{__scopeScrollArea:r,...i}=e,s=Z(ep,r),[o,l]=n.useState(0),[c,d]=n.useState(0),u=!!(o&&c);return eN(s.scrollbarX,()=>{let e=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(e),d(e)}),eN(s.scrollbarY,()=>{let e=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(e),l(e)}),u?(0,a.jsx)(p.sG.div,{...i,ref:t,style:{width:o,height:c,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null});function ey(e){return e?parseInt(e,10):0}function ew(e,t){let r=e/t;return isNaN(r)?0:r}function ex(e){let t=ew(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function eb(e,t,r="ltr"){let a=ex(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-n,s=t.content-t.viewport,o=function(e,[t,r]){return Math.min(r,Math.max(t,e))}(e,"ltr"===r?[0,s]:[-1*s,0]);return ej([0,s],[0,i-a])(o)}function ej(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}var eS=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return function n(){let i={left:e.scrollLeft,top:e.scrollTop},s=r.left!==i.left,o=r.top!==i.top;(s||o)&&t(),r=i,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function e_(e,t){let r=(0,z.c)(e),a=n.useRef(0);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),n.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function eN(e,t){let r=(0,z.c)(t);(0,q.N)(()=>{let t=0;if(e){let a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,r])}let eE=n.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(J,{ref:n,className:(0,E.cn)("relative overflow-hidden",e),...r,children:[(0,a.jsx)(ee,{className:"h-full w-full rounded-[inherit]",children:t}),(0,a.jsx)(eC,{}),(0,a.jsx)(eg,{})]}));eE.displayName=J.displayName;let eC=n.forwardRef(({className:e,orientation:t="vertical",...r},n)=>(0,a.jsx)(er,{ref:n,orientation:t,className:(0,E.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:(0,a.jsx)(em,{className:"relative flex-1 rounded-full bg-border"})}));eC.displayName=er.displayName,r(11302);var eR="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,ek="undefined"==typeof window;let eP=({attendanceRecords:e})=>{let[t,r]=(0,n.useState)([]),[i,s]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)("name"),[h,m]=(0,n.useState)("asc"),[f,p]=(0,n.useState)(""),g=function(e,{defaultValue:t=!1,initializeWithValue:r=!0}={}){let a=e=>ek?t:window.matchMedia(e).matches,[i,s]=(0,n.useState)(()=>r?a(e):t);function o(){s(a(e))}return eR(()=>{let t=window.matchMedia(e);return o(),t.addListener?t.addListener(o):t.addEventListener("change",o),()=>{t.removeListener?t.removeListener(o):t.removeEventListener("change",o)}},[e]),i}("(max-width: 768px)");(0,n.useEffect)(()=>{(async()=>{try{await (0,A.Xv)();let e=await (0,A.i7)("attendance");r(e);let t=(await (0,A.i7)("trackerInfo")).find(e=>"trackerInfo"===e.id);s(t?.trackerName??null),c(t?.trackerSection??null),console.log("useEffect - Fetched tracker info:",{trackerName:t?.trackerName,trackerSection:t?.trackerSection})}catch(e){console.error("Error fetching attendance records:",e)}})()},[]);let v=(0,n.useMemo)(()=>(e,t,r)=>e&&t?[...e].sort((e,a)=>{let n=e[t]||"",i=a[t]||"";return n<i?"asc"===r?-1:1:n>i?"asc"===r?1:-1:0}):[],[]),y=e=>{let t;t=d===e&&"asc"===h?"desc":"asc",u(e),m(t)},w=(0,n.useMemo)(()=>v(t,d,h),[t,d,h,v]),x=(0,n.useMemo)(()=>t?.filter(e=>e.timeIn).length||0,[t]),b=(0,n.useMemo)(()=>t?.filter(e=>e.timeOut).length||0,[t]),j=async()=>{if(!t||0===t.length){k.o.error("No attendance records to download.");return}k.o.loading("Generating CSV...",{id:"csv-download"});let e=t.map(e=>{let t=e.timeIn?new Date(e.timeIn).toLocaleString().replace(","," |"):"null",r=e.timeOut?new Date(e.timeOut).toLocaleString().replace(","," |"):"null";return`${e.id},${e.userID},${e.name},${e.section},${t},${r},`}).join("\n"),r=new Blob([`id,User ID,Name,Section,timeIn,timeOut,validator.piceamslogs
${e}`],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a;let s=`${l||"Records"} - ${i||"Attendance"}.csv`;n.download=s,console.log("generateCSV - File name:",s),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),k.o.success("CSV generated successfully!",{id:"csv-download"})};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(W.p,{type:"text",placeholder:"Search by Name or Section",value:f,onChange:e=>p(e.target.value)}),(0,a.jsx)(eE,{className:"w-full",children:(0,a.jsxs)("table",{className:`table-auto w-full text-sm ${g?"min-w-[600px]":""}`,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:(0,a.jsxs)(o.$,{variant:"link",className:"flex items-center",onClick:()=>y("name"),children:["Name","name"===d?"asc"===h?(0,a.jsx)(M.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(F.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(B.A,{className:"ml-1 h-4 w-4"})]})}),(0,a.jsx)("th",{className:"text-left",children:(0,a.jsxs)(o.$,{variant:"link",className:"flex items-center",onClick:()=>y("section"),children:["Section","section"===d?"asc"===h?(0,a.jsx)(M.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(F.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(B.A,{className:"ml-1 h-4 w-4"})]})}),(0,a.jsx)("th",{className:"text-left",children:(0,a.jsxs)(o.$,{variant:"link",className:"flex items-center",onClick:()=>y("timeIn"),children:["Time In (",x,")","timeIn"===d?"asc"===h?(0,a.jsx)(M.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(F.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(B.A,{className:"ml-1 h-4 w-4"})]})}),(0,a.jsx)("th",{className:"text-left",children:(0,a.jsxs)(o.$,{variant:"link",className:"flex items-center",onClick:()=>y("timeOut"),children:["Time Out (",b,")","timeOut"===d?"asc"===h?(0,a.jsx)(M.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(F.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(B.A,{className:"ml-1 h-4 w-4"})]})})]})}),(0,a.jsx)("tbody",{children:0===(t?t.filter(e=>!!e&&!!e.name&&!!e.section&&(e.name.toLowerCase().includes(f.toLowerCase())||e.section.toLowerCase().includes(f.toLowerCase()))):[]).length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center py-4 text-muted-foreground",children:"No records found"})}):w.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{children:e.section}),(0,a.jsx)("td",{children:e.timeIn}),(0,a.jsx)("td",{children:e.timeOut})]},e.id))})]})}),(0,a.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,a.jsxs)(o.$,{variant:"outline",onClick:j,disabled:!t||0===t.length,children:[(0,a.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Download CSV"]})})]})};var eD=r(69193);let eO=(0,O.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var e$=r(97608),eT=r.n(e$),eL=r(10203);let eA=()=>{let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),s=(0,n.useCallback)(async()=>{try{let e=0;for(let r of(await indexedDB.databases())){let a=r.name;if(a){let r=indexedDB.open(a);r.onsuccess=r=>{let a=r.target.result,n=a.transaction(a.objectStoreNames,"readonly");for(let r of a.objectStoreNames){let a=n.objectStore(r);a.getAllKeys().onsuccess=r=>{(r.target?.result).forEach(r=>{a.get(r).onsuccess=r=>{let a=r.target?.result;a&&(e+=JSON.stringify(a).length,t(function(e,t=2){if(!e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}(e)))}})}}},r.onerror=e=>{console.error("Error opening database for storage calculation",e)}}}}catch(e){console.error("Error calculating storage size:",e),t(null)}},[]);return(0,n.useEffect)(()=>{i(!0)},[]),(0,n.useEffect)(()=>{if(!r)return;s();let e=()=>{s()};return window.addEventListener("message",t=>{t.data&&"indexedDB_change"===t.data.type&&e()}),()=>{window.removeEventListener("message",t=>{t.data&&"indexedDB_change"===t.data.type&&e()})}},[r,s]),(0,a.jsxs)("div",{className:"fixed bottom-0 left-0 p-2 bg-gray-700 text-white text-xs z-50",children:["Storage Used: ",e||"Loading..."]})};function eI(){let e=(0,i.useRouter)(),t=(0,i.usePathname)(),[r,s]=(0,n.useState)(!1),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[m,f]=(0,n.useState)("attendance"),[p,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),[w,x]=(0,n.useState)(null),[b,j]=(0,n.useState)(null),S=(0,n.useRef)(null),[_,N]=(0,n.useState)(!0),[E,C]=(0,n.useState)(!1),R=(0,n.useCallback)(()=>{new Audio("/success.mp3").play().catch(console.error)},[]),D=(0,n.useCallback)(()=>{new Audio("/error.mp3").play().catch(console.error)},[]),O=async()=>{C(!0),k.o.loading("Signing out...",{id:"logout"});try{await (0,A.Hg)(),k.o.success("Successfully Signed Out",{id:"logout"}),e.push("/")}catch(e){console.error("Error clearing IndexedDB data:",e),k.o.error("Error logging out",{id:"logout"})}finally{C(!1)}},$=async e=>{try{let t=function(e){try{let t=eT().AES.decrypt(e,"pice-bulsu-ams").toString(eT().enc.Utf8);return JSON.parse(t)}catch(e){return console.error("Failed to decrypt hash:",e),null}}(e.code);if(!t){k.o.error("Invalid QR code"),D();return}let r={id:Date.now().toString(),userID:t.userID,name:t.name,section:t.section,timestamp:new Date().toLocaleString(),type:e.type};d(e=>[r,...e].slice(0,5)),await (0,A.B5)("scans",r);let a=`${t.userID}-${new Date().toLocaleDateString()}`,n=u.find(e=>e.id===a);if(n){let t={...n,["in"===e.type?"timeIn":"timeOut"]:r.timestamp};h(e=>e.map(e=>e.id===a?t:e)),await (0,A.B5)("attendance",t)}else{let n={id:a,userID:t.userID,name:t.name,section:t.section,["in"===e.type?"timeIn":"timeOut"]:r.timestamp};h(e=>[...e,n]),await (0,A.B5)("attendance",n)}R(),k.o.success(`Successfully scanned: ${t.name}`)}catch(e){console.error("Error processing QR code:",e),k.o.error("Error processing QR code"),D()}};return p&&v&&w&&b&&!_?(0,a.jsxs)("div",{className:"container mx-auto p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:b}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Tracker: ",v]}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Section: ",w]})]}),(0,a.jsx)(o.$,{variant:"outline",onClick:()=>s(!0),disabled:E,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Signing Out..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eO,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]}),(0,a.jsxs)(eD.tU,{defaultValue:"attendance",onValueChange:e=>{f(e),"attendance"===e&&S.current?S.current.startScanning():"attendance"!==e&&S.current&&S.current.stopScanning()},children:[(0,a.jsxs)(eD.j7,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(eD.Xi,{value:"attendance",children:"Take Attendance"}),(0,a.jsx)(eD.Xi,{value:"records",children:"Attendance Records"})]}),(0,a.jsx)(eD.av,{value:"attendance",children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(I,{ref:S,eventId:"current-event",onScanSuccess:$})}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Recent Scans"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[c.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.section})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs ${"in"===e.type?"bg-green-500/10 text-green-500":"bg-blue-500/10 text-blue-500"}`,children:["Time ","in"===e.type?"In":"Out"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.timestamp})]})]},e.id)),0===c.length&&(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"No recent scans"})]})})]})]})}),(0,a.jsx)(eD.av,{value:"records",children:(0,a.jsx)(eP,{attendanceRecords:u})})]}),(0,a.jsx)(eL.Lt,{open:r,onOpenChange:s,children:(0,a.jsxs)(eL.EO,{children:[(0,a.jsxs)(eL.wd,{children:[(0,a.jsx)(eL.r7,{children:"Are you sure you want to log out?"}),(0,a.jsx)(eL.$v,{children:"You will be logged out of this session."})]}),(0,a.jsx)(eL.Rx,{onClick:O,children:"Log out"}),(0,a.jsx)(eL.Zr,{children:"Cancel"})]})}),"/tracker"===t&&(0,a.jsx)(eA,{})]}):null}},10203:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>D,Rx:()=>I,Zr:()=>M,EO:()=>$,$v:()=>A,wd:()=>T,r7:()=>L});var a=r(45512),n=r(58009),i=r(6004),s=r(29952),o=r(89650),l=r(31412),c=r(12705),d="AlertDialog",[u,h]=(0,i.A)(d,[o.Hs]),m=(0,o.Hs)(),f=e=>{let{__scopeAlertDialog:t,...r}=e,n=m(t);return(0,a.jsx)(o.bL,{...n,...r,modal:!0})};f.displayName=d,n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...n}=e,i=m(r);return(0,a.jsx)(o.l9,{...i,...n,ref:t})}).displayName="AlertDialogTrigger";var p=e=>{let{__scopeAlertDialog:t,...r}=e,n=m(t);return(0,a.jsx)(o.ZL,{...n,...r})};p.displayName="AlertDialogPortal";var g=n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...n}=e,i=m(r);return(0,a.jsx)(o.hJ,{...i,...n,ref:t})});g.displayName="AlertDialogOverlay";var v="AlertDialogContent",[y,w]=u(v),x=n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:i,...d}=e,u=m(r),h=n.useRef(null),f=(0,s.s)(t,h),p=n.useRef(null);return(0,a.jsx)(o.G$,{contentName:v,titleName:b,docsSlug:"alert-dialog",children:(0,a.jsx)(y,{scope:r,cancelRef:p,children:(0,a.jsxs)(o.UC,{role:"alertdialog",...u,...d,ref:f,onOpenAutoFocus:(0,l.m)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(c.xV,{children:i}),(0,a.jsx)(R,{contentRef:h})]})})})});x.displayName=v;var b="AlertDialogTitle",j=n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...n}=e,i=m(r);return(0,a.jsx)(o.hE,{...i,...n,ref:t})});j.displayName=b;var S="AlertDialogDescription",_=n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...n}=e,i=m(r);return(0,a.jsx)(o.VY,{...i,...n,ref:t})});_.displayName=S;var N=n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...n}=e,i=m(r);return(0,a.jsx)(o.bm,{...i,...n,ref:t})});N.displayName="AlertDialogAction";var E="AlertDialogCancel",C=n.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...n}=e,{cancelRef:i}=w(E,r),l=m(r),c=(0,s.s)(t,i);return(0,a.jsx)(o.bm,{...l,...n,ref:c})});C.displayName=E;var R=({contentRef:e})=>{let t=`\`${v}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${v}\` by passing a \`${S}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${v}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},k=r(59462),P=r(87021);let D=f,O=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(g,{className:(0,k.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));O.displayName=g.displayName;let $=n.forwardRef(({className:e,...t},r)=>(0,a.jsxs)(p,{children:[(0,a.jsx)(O,{}),(0,a.jsx)(x,{ref:r,className:(0,k.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));$.displayName=x.displayName;let T=({className:e,...t})=>(0,a.jsx)("div",{className:(0,k.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});T.displayName="AlertDialogHeader";let L=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(j,{ref:r,className:(0,k.cn)("text-lg font-semibold",e),...t}));L.displayName=j.displayName;let A=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(_,{ref:r,className:(0,k.cn)("text-sm text-muted-foreground",e),...t}));A.displayName=_.displayName;let I=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(N,{ref:r,className:(0,k.cn)((0,P.r)(),e),...t}));I.displayName=N.displayName;let M=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(C,{ref:r,className:(0,k.cn)((0,P.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));M.displayName=C.displayName},77252:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var a=r(45512);r(58009);var n=r(21643),i=r(59462);let s=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,a.jsx)("div",{className:(0,i.cn)(s({variant:t}),e),...r})}},87021:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var a=r(45512),n=r(58009),i=r(12705),s=r(21643),o=r(59462);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},c)=>{let d=n?i.DX:"button";return(0,a.jsx)(d,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:c,...s})});c.displayName="Button"},97643:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>c,ZB:()=>l,Zp:()=>s,aR:()=>o});var a=r(45512),n=r(58009),i=r(59462);let s=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));s.displayName="Card";let o=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle",n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let c=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},25409:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var a=r(45512),n=r(58009),i=r(59462);let s=n.forwardRef(({className:e,type:t,...r},n)=>(0,a.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));s.displayName="Input"},53261:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var a=r(45512),n=r(58009),i=r(30830),s=n.forwardRef((e,t)=>(0,a.jsx)(i.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var o=r(21643),l=r(59462);let c=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s,{ref:r,className:(0,l.cn)(c(),e),...t}));d.displayName=s.displayName},69193:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>c,av:()=>d,j7:()=>l,tU:()=>o});var a=r(45512),n=r(58009),i=r(33416),s=r(59462);let o=i.bL,l=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(i.B8,{ref:r,className:(0,s.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));l.displayName=i.B8.displayName;let c=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(i.l9,{ref:r,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));c.displayName=i.l9.displayName;let d=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(i.UC,{ref:r,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));d.displayName=i.UC.displayName},59462:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(82281),n=r(94805);function i(...e){return(0,n.QP)((0,a.$)(e))}},11302:e=>{var t=0/0,r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,o="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=o||l||Function("return this")(),d=Object.prototype.toString,u=Math.max,h=Math.min,m=function(){return c.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if("number"==typeof e)return e;if("symbol"==typeof(o=e)||o&&"object"==typeof o&&"[object Symbol]"==d.call(o))return t;if(f(e)){var o,l="function"==typeof e.valueOf?e.valueOf():e;e=f(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var c=n.test(e);return c||i.test(e)?s(e.slice(2),c?2:8):a.test(e)?t:+e}e.exports=function(e,t,r){var a,n,i,s,o,l,c=0,d=!1,g=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var r=a,i=n;return a=n=void 0,c=t,s=e.apply(i,r)}function w(e){var r=e-l,a=e-c;return void 0===l||r>=t||r<0||g&&a>=i}function x(){var e,r,a,n=m();if(w(n))return b(n);o=setTimeout(x,(e=n-l,r=n-c,a=t-e,g?h(a,i-r):a))}function b(e){return(o=void 0,v&&a)?y(e):(a=n=void 0,s)}function j(){var e,r=m(),i=w(r);if(a=arguments,n=this,l=r,i){if(void 0===o)return c=e=l,o=setTimeout(x,t),d?y(e):s;if(g)return o=setTimeout(x,t),y(l)}return void 0===o&&(o=setTimeout(x,t)),s}return t=p(t)||0,f(r)&&(d=!!r.leading,i=(g="maxWait"in r)?u(p(r.maxWait)||0,t):i,v="trailing"in r?!!r.trailing:v),j.cancel=function(){void 0!==o&&clearTimeout(o),c=0,a=l=n=o=void 0},j.flush=function(){return void 0===o?s:b(m())},j}},43050:(e,t,r)=>{"use strict";r.d(t,{B5:()=>s,Hg:()=>l,Xv:()=>i,i7:()=>o});let a="attendance_tracker_db",n=null;async function i(){return new Promise((e,t)=>{if(n){e();return}let r=indexedDB.open(a,1);r.onerror=e=>{console.error("IndexedDB error:",e),t("Failed to open IndexedDB")},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("trackerInfo")||t.createObjectStore("trackerInfo",{keyPath:"id"}),t.objectStoreNames.contains("scans")||t.createObjectStore("scans",{keyPath:"id"}),t.objectStoreNames.contains("attendance")||t.createObjectStore("attendance",{keyPath:"id"})},r.onsuccess=t=>{n=t.target.result,console.log("IndexedDB initialized successfully"),e()}})}async function s(e,t){return new Promise((r,a)=>{if(!n){a("Database not initialized");return}let i=n.transaction(e,"readwrite").objectStore(e);t.id||(t.id=Date.now().toString());let s=i.put(t);s.onsuccess=()=>{console.log("Data successfully added to IndexedDB:",t),window.postMessage({type:"indexedDB_change"},window.location.origin),r()},s.onerror=t=>{console.error(`Error adding item to ${e}:`,t),a(`Failed to add item to ${e}`)}})}async function o(e){return new Promise((t,r)=>{if(!n){r("Database not initialized");return}let a=n.transaction(e,"readonly").objectStore(e).getAll();a.onsuccess=e=>{t(e.target.result)},a.onerror=t=>{console.error(`Error getting items from ${e}:`,t),r(`Failed to get items from ${e}`)}})}async function l(){return new Promise((e,t)=>{if(!n){t("Database not initialized");return}n.close();let r=indexedDB.deleteDatabase(a);r.onsuccess=()=>{n=null,e()},r.onerror=e=>{console.error("Error deleting database:",e),t("Failed to delete database")}})}},19611:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>i});var a=r(62740);r(76301),r(23141);var n=r(56814);let i={title:"PICE BulSU-SC AMS",description:"Attendance Management System for PICE"},s=({children:e})=>(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsxs)("head",{children:[(0,a.jsx)("link",{rel:"icon",href:"/web/16.ico",sizes:"16x16"}),(0,a.jsx)("link",{rel:"icon",href:"/web/32.ico",sizes:"32x32"}),(0,a.jsx)("link",{rel:"icon",href:"/web/96.ico",sizes:"96x96"})]}),(0,a.jsxs)("body",{children:[e,(0,a.jsx)(n.Toaster,{position:"bottom-right"})," "]})]})},38771:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/PICE-AMS2-V4/pice-ams/app/tracker/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/PICE-AMS2-V4/pice-ams/app/tracker/page.tsx","default")},23141:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1,652,650,222,63],()=>r(56278));module.exports=a})();